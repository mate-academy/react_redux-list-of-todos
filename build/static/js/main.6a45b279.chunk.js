(this["webpackJsonpreact_redux-list-of-todos"]=this["webpackJsonpreact_redux-list-of-todos"]||[]).push([[0],{19:function(e,t,r){e.exports=r(40)},25:function(e,t,r){},26:function(e,t,r){},27:function(e,t,r){},28:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(13),c=r.n(o),s=r(10),i=r.n(s),u=r(3),l=r(1),p=r(14),d=r(4),f=r(5),m=r(7),b=r(6),O=r(8),E=(r(25),r(26),r(27),r(28),function(e){var t=e.name,r=e.username,n=e.email,o=t.split(" "),c=o.splice(0,1);return a.a.createElement("div",{className:"user"},a.a.createElement("p",{className:"user__title"},c),a.a.createElement("p",{className:"user__title user--nik"},"'".concat(r,"'")),a.a.createElement("p",{className:"user__title"},o.join(" ")),a.a.createElement("p",{className:"user__title user--email"},n))});var h=function(e){var t=e.title,r=e.completed,n=e.user;return a.a.createElement("div",{className:"todo-item"},a.a.createElement("h2",{className:"todo-item__title"},t),a.a.createElement("p",{className:"todo-item__check"},r?"\u2713":""),a.a.createElement(E,n))},y=r(9),v=r(15),j={LOAD_TODOS:"LOAD::TODOS",SET_FILTER_PATTERN:"SET::FILTER::PATTERN",SET_ERROR_MESSAGE:"ERROR::MESSAGE"},g=function(e){return{type:j.LOAD_TODOS,payload:e}},S=function(e){return{type:j.SET_FILTER_PATTERN,payload:e}},w=function(e){return{type:j.SET_ERROR_MESSAGE,payload:e}};function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(r,!0).forEach((function(t){Object(u.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=Object(y.createStore)((function(e,t){var r=j.LOAD_TODOS,n=j.SET_FILTER_PATTERN,a=j.SET_ERROR_MESSAGE;switch(t.type){case r:return T({},e,{todos:t.payload});case n:return T({},e,{filterPattern:t.payload});case a:return T({},e,{error:t.payload});default:return e}}),{todos:[],filterPattern:"",error:null},Object(v.devToolsEnhancer)(g(),S(),w())),k=function(){var e=function(e){var t=e.todos,r=Object(n.useState)(t),a=Object(l.a)(r,2);return{value:a[0],set:a[1]}}(P.getState()),t=function(e){var t=e.filterPattern,r=Object(n.useState)(t),a=Object(l.a)(r,2);return{value:a[0],set:a[1]}}(P.getState());return Object(n.useEffect)((function(){P.subscribe((function(){var r=P.getState(),n=r.todos,a=r.filterPattern;""===a?e.set(n):(e.set(n.sort((function(e,t){return e[a]>t[a]?1:e[a]<t[a]?-1:e.id>t.id?1:e.id<t.id?-1:0}))),t.set(a))}))})),a.a.createElement("div",{className:"todolist"},e.value.map((function(e){return a.a.createElement(h,Object.assign({key:e.id},e))})))},N=r(17),D=r.n(N),L=r(18),R=r.n(L),A=(r(39),function(e){function t(){var e,r;Object(d.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(a)))).state={isOpen:!1},r.handleDropdownToggle=function(){r.setState((function(e){return{isOpen:!e.isOpen}}))},r.handleDropdownSelect=function(e){r.setState({isOpen:!1}),P.dispatch(S(e.target.dataset.value))},r}return Object(O.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.title,n=t.itemsList;return a.a.createElement("div",{className:"dropdown"},a.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:this.handleDropdownToggle},r),a.a.createElement("div",{className:D()("dropdown-menu",{show:this.state.isOpen}),"aria-labelledby":"dropdownMenuButton"},n.map((function(t){return a.a.createElement("p",{key:R.a.generate(),className:"dropdown-item","data-value":t.value,onClick:e.handleDropdownSelect},t.option)}))))}}]),t}(n.Component));function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach((function(t){Object(u.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C="https://jsonplaceholder.typicode.com",I=[{option:"Title",value:"title"},{option:"User",value:"userName"},{option:"Status",value:"completed"}],B=function(e){function t(){var e,r;Object(d.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(r=Object(m.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={isLoaded:!1,isLoading:!1,errorMessage:null},r.onLoadClick=Object(p.a)(i.a.mark((function e(){var t,n,a,o,c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setState({isLoading:!0}),e.prev=1,e.next=4,Promise.all([fetch("".concat(C,"/todos")),fetch("".concat(C,"/users"))]);case 4:if(t=e.sent,n=Object(l.a)(t,2),a=n[0],o=n[1],a.ok){e.next=10;break}throw new Error("ToDo list fetch is broken");case 10:if(o.ok){e.next=12;break}throw new Error("User list fetch is broken");case 12:return e.next=14,a.json();case 14:return c=e.sent,e.next=17,o.json();case 17:s=e.sent,P.dispatch(g(c.map((function(e){return M({},e,{user:s.find((function(t){return t.id===e.userId}))})})).map((function(e){return M({},e,{userName:e.user.name})})))),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),P.dispatch(w(e.t0.message));case 24:r.setState({isLoaded:!0,isLoading:!1});case 25:case"end":return e.stop()}}),e,null,[[1,21]])}))),r.loaderButton=function(){return r.state.isLoading?a.a.createElement("button",{className:"btn btn-primary",type:"button",disabled:!0},a.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Loading..."):a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return r.onLoadClick()}},"Load")},r}return Object(O.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;P.subscribe((function(){return e.setState({errorMessage:P.getState().error})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,r=e.errorMessage;return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"Dynamic list of todos"),a.a.createElement("h2",{className:"error-message"},r),t?a.a.createElement(a.a.Fragment,null,a.a.createElement(A,{title:"Sort by",itemsList:I}),a.a.createElement(k,null)):this.loaderButton())}}]),t}(n.Component);c.a.render(a.a.createElement(B,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.6a45b279.chunk.js.map