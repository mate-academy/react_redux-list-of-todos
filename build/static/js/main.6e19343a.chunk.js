(this["webpackJsonpreact_redux-list-of-todos"]=this["webpackJsonpreact_redux-list-of-todos"]||[]).push([[0],{19:function(e,t,r){e.exports=r(40)},24:function(e,t,r){},25:function(e,t,r){},26:function(e,t,r){},27:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(13),s=r.n(o),c=r(3),i=r(4),u=r(5),l=r(7),p=r(6),d=r(8),f=(r(24),r(1)),m=(r(25),r(26),r(27),function(e){var t=e.name,r=e.username,n=e.email,o=t.split(" "),s=o.splice(0,1);return a.a.createElement("div",{className:"user"},a.a.createElement("p",{className:"user__title"},s),a.a.createElement("p",{className:"user__title user--nik"},"'".concat(r,"'")),a.a.createElement("p",{className:"user__title"},o.join(" ")),a.a.createElement("p",{className:"user__title user--email"},n))});var b=function(e){var t=e.title,r=e.completed,n=e.user;return a.a.createElement("div",{className:"todo-item"},a.a.createElement("h2",{className:"todo-item__title"},t),a.a.createElement("p",{className:"todo-item__check"},r?"\u2713":""),a.a.createElement(m,n))},O=r(10),E=r.n(O),h=r(14),v=r(9),y=r(15),j={LOAD_TODOS:"LOAD::TODOS",SET_FILTER_PATTERN:"SET::FILTER::PATTERN",SET_ERROR_MESSAGE:"ERROR::MESSAGE"},g=function(e){return{type:j.LOAD_TODOS,payload:e}},S=function(e){return{type:j.SET_FILTER_PATTERN,payload:e}};function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var T=function(){var e=Object(h.a)(E.a.mark((function e(t,r){var n,a,o,s,c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([fetch(t),fetch(r)]);case 3:if(n=e.sent,a=Object(f.a)(n,2),o=a[0],s=a[1],o.ok){e.next=9;break}throw new Error("ToDo list fetch is broken");case 9:if(s.ok){e.next=11;break}throw new Error("User list fetch is broken");case 11:return e.next=13,o.json();case 13:return c=e.sent,e.next=16,s.json();case 16:return i=e.sent,e.abrupt("return",{todos:c,users:i});case 20:e.prev=20,e.t0=e.catch(0),P.dispatch((u=e.t0.message,{type:j.SET_ERROR_MESSAGE,payload:u}));case 23:case"end":return e.stop()}var u}),e,null,[[0,20]])})));return function(t,r){return e.apply(this,arguments)}}();var P=Object(v.createStore)((function(e,t){var r=j.LOAD_TODOS,n=j.SET_FILTER_PATTERN,a=j.SET_ERROR_MESSAGE;switch(t.type){case r:return _({},e,{todos:t.payload});case n:return _({},e,{filterPattern:t.payload});case a:return _({},e,{error:t.payload});default:return e}}),{todos:[],filterPattern:"",error:null},Object(y.devToolsEnhancer)(g(),S())),N=function(){var e=function(e){var t=e.todos,r=Object(n.useState)(t),a=Object(f.a)(r,2);return{value:a[0],set:a[1]}}(P.getState()),t=function(e){var t=e.filterPattern,r=Object(n.useState)(t),a=Object(f.a)(r,2);return{value:a[0],set:a[1]}}(P.getState());return Object(n.useEffect)((function(){P.subscribe((function(){var r=P.getState(),n=r.todos,a=r.filterPattern;""===a?e.set(n):(e.set(n.sort((function(e,t){return e[a]>t[a]?1:e[a]<t[a]?-1:e.id>t.id?1:e.id<t.id?-1:0}))),t.set(a))}))})),a.a.createElement("div",{className:"todolist"},e.value.map((function(e){return a.a.createElement(b,Object.assign({key:e.id},e))})))},k=r(17),D=r.n(k),L=r(18),R=r.n(L),A=(r(39),function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(a)))).state={isOpen:!1},r.handleDropdownToggle=function(){r.setState((function(e){return{isOpen:!e.isOpen}}))},r.handleDropdownSelect=function(e){r.setState({isOpen:!1}),P.dispatch(S(e.target.dataset.value))},r}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.title,n=t.itemsList;return a.a.createElement("div",{className:"dropdown"},a.a.createElement("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:this.handleDropdownToggle},r),a.a.createElement("div",{className:D()("dropdown-menu",{show:this.state.isOpen}),"aria-labelledby":"dropdownMenuButton"},n.map((function(t){return a.a.createElement("p",{key:R.a.generate(),className:"dropdown-item","data-value":t.value,onClick:e.handleDropdownSelect},t.option)}))))}}]),t}(n.Component));function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(r,!0).forEach((function(t){Object(c.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C="https://jsonplaceholder.typicode.com",I=[{option:"Title",value:"title"},{option:"User",value:"userName"},{option:"Status",value:"completed"}],B=function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={isLoaded:!1,isLoading:!1,errorMessage:null},r.onLoadClick=function(){r.setState({isLoading:!0}),T("".concat(C,"/todos"),"".concat(C,"/users")).then((function(e){var t=e.todos,n=e.users;P.dispatch(g(t.map((function(e){return M({},e,{user:n.find((function(t){return t.id===e.userId}))})})).map((function(e){return M({},e,{userName:e.user.name})})))),r.setState({isLoaded:!0,isLoading:!1})}))},r.loaderButton=function(){return r.state.isLoading?a.a.createElement("button",{className:"btn btn-primary",type:"button",disabled:!0},a.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"Loading..."):a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return r.onLoadClick()}},"Load")},r}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;P.subscribe((function(){return e.setState({errorMessage:P.getState().error})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoaded,r=e.errorMessage;return a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"Dynamic list of todos"),a.a.createElement("h2",{className:"error-message"},r),t?a.a.createElement(a.a.Fragment,null,a.a.createElement(A,{title:"Sort by",itemsList:I}),a.a.createElement(N,null)):this.loaderButton())}}]),t}(n.Component);s.a.render(a.a.createElement(B,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.6e19343a.chunk.js.map