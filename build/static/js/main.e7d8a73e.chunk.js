(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{133:function(e,t,n){e.exports=n(259)},258:function(e,t,n){},259:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(19),c=n.n(o),u=n(50),l=n(30),i=n(113),d=n(15),s=n(123),p={SAVE:"SAVE",SET_LOAD_ERROR:"SET_LOAD_ERROR",START_LOADING:"START_LOADING",STOP_LOADING:"STOP_LOADING",DELETE_TODO:"DELETE_TODO",SORT_TODOS:"SORT_TODOS"},m=function(e){return function(t){t(function(e){return{type:p.SORT_TODOS,payload:e}}(e))}},E=function(e){return function(t){t(function(e){return{type:p.DELETE_TODO,todoId:e}}(e))}},O=["https://jsonplaceholder.typicode.com/todos","https://jsonplaceholder.typicode.com/users"],T=function(){return function(e){e({type:p.START_LOADING});var t=O.map(function(e){return fetch(e).then(function(e){return e.json()})});Promise.all(t).then(function(t){var n;e((n=t,{type:p.SAVE,payload:n}))}).catch(function(t){return e(function(e){return{type:p.SET_LOAD_ERROR,payload:e}}(t.message))}).finally(function(){return e({type:p.STOP_LOADING})})}},f={isLoading:!1,error:!1,initialized:!1,preparedTodos:null};function y(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return n&&r?n.map(function(e){return Object(d.a)({},e,{user:r.find(function(t){return e.userId===t.id})})}):[]}var b=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Object(l.c)(),D=[i.a],_=Object(l.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p.SAVE:var n=t.payload;return Object(d.a)({},e,{error:!1,preparedTodos:y(n)});case p.SET_LOAD_ERROR:return Object(d.a)({},e,{error:!0,preparedTodos:[]});case p.START_LOADING:return Object(d.a)({},e,{isLoading:!0});case p.STOP_LOADING:return Object(d.a)({},e,{isLoading:!1});case p.DELETE_TODO:var r=t.todoId;return Object(d.a)({},e,{preparedTodos:e.preparedTodos.filter(function(e){return e.id!==r})});case p.SORT_TODOS:switch(t.payload){case"byUser":return Object(d.a)({},e,{preparedTodos:e.preparedTodos.sort(function(e,t){return e.user.name.localeCompare(t.user.name)})});case"byTitle":return Object(d.a)({},e,{preparedTodos:e.preparedTodos.sort(function(e,t){return e.title.localeCompare(t.title)})});case"byStatus":return Object(d.a)({},e,{preparedTodos:e.preparedTodos.sort(function(e,t){return e.completed-t.completed})});default:return Object(d.a)({},e,{preparedTodos:e.preparedTodos})}default:return e}},b(l.a.apply(void 0,D))),S=n(262),h=n(51),L=function(e){return e},v=Object(h.a)(L,function(e){return e.preparedTodos}),A=Object(h.a)(L,function(e){return e.error}),R=Object(h.a)(L,function(e){return e.isLoading}),g=n(32),j=a.a.createContext(),N=a.a.createContext(),w=function(e){var t=e.user;return a.a.createElement("td",null,t.name)},C=function(e){var t=e.todo;return a.a.createElement("tr",null,a.a.createElement("td",null,t.title),a.a.createElement(w,{user:t.user}),t.completed?a.a.createElement("td",{className:"positive"},a.a.createElement("i",{className:"icon checkmark"}),"Approved"):a.a.createElement("td",{className:"negative"},a.a.createElement("i",{className:"icon close"}),"In procces"),a.a.createElement("td",null,a.a.createElement(j.Consumer,null,function(e){return a.a.createElement(S.a,{icon:!0},a.a.createElement(g.a,{name:"user delete",onClick:function(){return e.deleteTodo(t.id)}}))})))},I=function(){return a.a.createElement("table",{className:"ui red table"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"TODO item"),a.a.createElement("th",null,"The name of the user"),a.a.createElement("th",null,"Completed"),a.a.createElement("th",null,"Delete"))),a.a.createElement("tbody",null,a.a.createElement(j.Consumer,null,function(e){return e.preparedTodos.map(function(e){return a.a.createElement(C,{todo:e,key:e.id})})})))};var k=function(){return a.a.createElement(N.Consumer,null,function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(S.a,{type:"button",onClick:function(){return e.switcher("byUser")}},"By User!"),a.a.createElement(S.a,{type:"button",onClick:function(){return e.switcher("byTitle")}},"By Title!"),a.a.createElement(S.a,{type:"button",onClick:function(){return e.switcher("byStatus")}},"By Status!"),a.a.createElement(S.a,{type:"button",onClick:function(){return e.loadData()}},"Refresh!"))})},P=(n(258),function(e){var t=e.isLoading,n=e.error,r=e.preparedTodos,o=e.loadData,c=e.deleteTodo,u=e.switcher;return t?a.a.createElement("p",null,"loading..."):n?a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Error occurred!!!"),a.a.createElement(S.a,{type:"button",onClick:function(){return o(!0)}},"Try Again!")):r?a.a.createElement("div",{className:"App"},a.a.createElement("h1",null,"Dynamic list of todos"),a.a.createElement(N.Provider,{value:{switcher:u,loadData:o}},a.a.createElement(k,null)),a.a.createElement(j.Provider,{value:{preparedTodos:r,deleteTodo:c}},a.a.createElement(I,null))):a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"No users and todos yet!"),a.a.createElement(S.a,{type:"button",onClick:function(){return o(!0)},color:"green"},"Load"))});var G=Object(u.b)(function(e){return{preparedTodos:v(e),error:A(e),isLoading:R(e)}},function(e){return{loadData:function(){return e(T())},stopLoading:function(t){return e({type:p.STOP_LOADING,isLoading:t})},deleteTodo:function(t){return e(E(t))},switcher:function(t){return e(m(t))}}})(P);P.defaultProps={preparedTodos:[],error:!1,isLoading:!1},c.a.render(a.a.createElement(u.a,{store:_},a.a.createElement(G,null)),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.e7d8a73e.chunk.js.map